import{j as e}from"./jsx-runtime.CyXy1Ci3.js";import{R as g,r as n}from"./index.CaZlGE7t.js";import{f as p}from"./helpers.CnSBAKOu.js";const j=g.memo(({onSearch:l,placeholder:m="搜索话题..."})=>{const[x,c]=n.useState(""),h=n.useCallback(u=>{const o=u.target.value;c(o),l(o)},[l]),d=n.useCallback(()=>{c(""),l("")},[l]);return e.jsxs("div",{className:"relative mb-6",children:[e.jsx("input",{type:"text",value:x,onChange:h,placeholder:m,className:"w-full px-4 py-3 pl-12 pr-10 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-800 dark:border-gray-700 dark:text-white dark:placeholder-gray-400"}),e.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),x&&e.jsx("button",{onClick:d,className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 dark:hover:text-gray-300","aria-label":"清除搜索",children:e.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M6 18L18 6M6 6l12 12"})})})]})}),N=g.memo(({initialTopics:l})=>{const[m,x]=n.useState(l),[c,h]=n.useState(l),[d,u]=n.useState("latest"),o=n.useCallback((t,r)=>{let i=[...t];switch(r){case"latest":i.sort((s,a)=>new Date(a.createdAt).getTime()-new Date(s.createdAt).getTime());break;case"oldest":i.sort((s,a)=>new Date(s.createdAt).getTime()-new Date(a.createdAt).getTime());break;case"mostContent":i.sort((s,a)=>a.contentItems.length-s.contentItems.length);break;case"mostRatings":i.sort((s,a)=>a.ratings.length-s.ratings.length);break;case"mostComments":i.sort((s,a)=>a.comments.length-s.comments.length);break}h(i)},[]),b=n.useCallback(t=>{if(!t.trim()){o(m,d);return}const r=t.toLowerCase(),i=m.filter(s=>s.title.toLowerCase().includes(r)||s.description.toLowerCase().includes(r)||s.tags.some(a=>a.toLowerCase().includes(r))||s.creator.toLowerCase().includes(r));o(i,d)},[m,d,o]),f=n.useCallback(t=>{const r=t.target.value;u(r),o(c,r)},[c,o]);return n.useEffect(()=>{x(l),o(l,d)},[l,d,o]),e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-6",children:[e.jsx(j,{onSearch:b}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{htmlFor:"sort",className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"排序:"}),e.jsxs("select",{id:"sort",value:d,onChange:f,className:"px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-800 dark:border-gray-700 dark:text-white",children:[e.jsx("option",{value:"latest",children:"最新创建"}),e.jsx("option",{value:"oldest",children:"最早创建"}),e.jsx("option",{value:"mostContent",children:"最多内容项"}),e.jsx("option",{value:"mostRatings",children:"最多评分"}),e.jsx("option",{value:"mostComments",children:"最多评论"})]})]})]}),c.length===0?e.jsxs("div",{className:"bg-gradient-to-br from-white to-blue-50 rounded-2xl shadow-lg p-12 text-center border border-blue-100",children:[e.jsx("div",{className:"bg-blue-100 w-20 h-20 rounded-full flex items-center justify-center mx-auto mb-6",children:e.jsx("svg",{className:"w-10 h-10 text-blue-600",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),e.jsx("h3",{className:"text-2xl font-bold mb-3 text-gray-800",children:"未找到匹配的话题"}),e.jsx("p",{className:"text-gray-600 mb-8 max-w-md mx-auto",children:"尝试使用其他关键词搜索，或创建一个新的话题"}),e.jsx("a",{href:"/create-topic",className:"bg-gradient-to-r from-blue-600 to-blue-700 text-white px-6 py-3 rounded-lg hover:from-blue-700 hover:to-blue-800 transition-all duration-200 shadow-md hover:shadow-lg transform hover:-translate-y-1",children:"创建新话题"})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:c.map(t=>e.jsxs("div",{className:"bg-gradient-to-br from-white to-blue-50 rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-300 transform hover:-translate-y-2 p-8 border border-gray-100 hover:border-blue-200 relative overflow-hidden group",children:[e.jsx("div",{className:"absolute top-0 right-0 w-40 h-40 bg-blue-100 rounded-full -mr-20 -mt-20 opacity-0 group-hover:opacity-30 transition-opacity duration-300"}),e.jsxs("div",{className:"relative z-10",children:[e.jsxs("div",{className:"flex justify-between items-start mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-800",children:e.jsx("a",{href:`/topics/detail?id=${t.id}`,className:"hover:text-blue-600 transition-colors group-hover:underline group-hover:underline-offset-4",children:t.title})}),e.jsx("span",{className:"text-sm text-gray-500 bg-white bg-opacity-80 backdrop-blur-sm px-3 py-1 rounded-full",children:p(t.createdAt)})]}),e.jsx("p",{className:"text-gray-600 mb-5 line-clamp-3 leading-relaxed",children:t.description}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-6",children:t.tags.map(r=>e.jsx("span",{className:"bg-gradient-to-r from-blue-100 to-blue-200 text-blue-800 px-3 py-1 rounded-full text-sm font-medium hover:from-blue-200 hover:to-blue-300 transition-colors duration-200",children:r},r))}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{className:"text-sm text-gray-500",children:[e.jsx("span",{className:"font-medium text-gray-700",children:"创建者:"})," ",t.creator]}),e.jsxs("div",{className:"flex space-x-6 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("svg",{className:"w-4 h-4 text-blue-600",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M9 12l2 2 4-4M7.835 4.697a3.42 3.42 0 001.946-.806 3.42 3.42 0 014.438 0 3.42 3.42 0 001.946.806 3.42 3.42 0 013.138 3.138 3.42 3.42 0 00.806 1.946 3.42 3.42 0 010 4.438 3.42 3.42 0 00-.806 1.946 3.42 3.42 0 01-3.138 3.138 3.42 3.42 0 00-1.946.806 3.42 3.42 0 01-4.438 0 3.42 3.42 0 00-1.946-.806 3.42 3.42 0 01-3.138-3.138 3.42 3.42 0 00-.806-1.946 3.42 3.42 0 010-4.438 3.42 3.42 0 00.806-1.946 3.42 3.42 0 013.138-3.138z"})}),e.jsx("span",{className:"text-gray-600",children:t.contentItems.length})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("svg",{className:"w-4 h-4 text-yellow-600",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M12 17.27L18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"})}),e.jsx("span",{className:"text-gray-600",children:t.ratings.length})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("svg",{className:"w-4 h-4 text-green-600",fill:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{d:"M21 11.5a8.38 8.38 0 01-.9 3.8 8.5 8.5 0 01-7.6 4.7 8.38 8.38 0 01-3.8-.9L3 21l1.9-5.7a8.38 8.38 0 01-.9-3.8 8.5 8.5 0 014.7-7.6 8.38 8.38 0 013.8-.9h.5a8.48 8.48 0 018 8v.5z"})}),e.jsx("span",{className:"text-gray-600",children:t.comments.length})]})]})]})]})]},t.id))})]})});export{N as default};
