import{j as e}from"./jsx-runtime.CyXy1Ci3.js";import{r as l}from"./index.CaZlGE7t.js";const u=()=>{const[t,a]=l.useState(!1);l.useEffect(()=>{const r=localStorage.getItem("darkMode"),o=window.matchMedia("(prefers-color-scheme: dark)").matches,s=r?JSON.parse(r):o;a(s),document.documentElement.classList.toggle("dark",s)},[]);const n=()=>{const r=!t;a(r),localStorage.setItem("darkMode",JSON.stringify(r)),document.documentElement.classList.toggle("dark",r)};return e.jsx("button",{onClick:n,className:"p-2 rounded-full hover:bg-gray-200 dark:hover:bg-gray-700 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2","aria-label":t?"切换到浅色模式":"切换到深色模式",children:t?e.jsx("svg",{className:"w-5 h-5 text-yellow-500",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{fillRule:"evenodd",d:"M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z",clipRule:"evenodd"})}):e.jsx("svg",{className:"w-5 h-5 text-gray-700",fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"})})})},x=()=>{const[t,a]=l.useState(()=>{if(typeof window>"u")return null;const r=localStorage.getItem("vote_rating_current_user");return r?JSON.parse(r):null});return{user:t,createNewUser:r=>{if(typeof window>"u")return null;const o={id:`user_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,username:r,createdAt:new Date,updatedAt:new Date},s=JSON.parse(localStorage.getItem("vote_rating_users")||"[]");return s.push(o),localStorage.setItem("vote_rating_users",JSON.stringify(s)),localStorage.setItem("vote_rating_current_user",JSON.stringify(o)),a(o),o}}};function c({onClose:t}){const{user:a,createNewUser:n}=x(),[r,o]=l.useState(""),[s,d]=l.useState("");if(a)return e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("span",{className:"text-gray-600 dark:text-gray-300",children:["欢迎, ",a.username]}),e.jsx("div",{className:"h-8 w-8 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white font-medium",children:a.username.charAt(0).toUpperCase()})]});const h=i=>{if(i.preventDefault(),!r.trim()){d("请输入用户名");return}if(r.length<2){d("用户名至少需要2个字符");return}n(r.trim()),d(""),t&&t()};return e.jsxs("div",{className:"max-w-md mx-auto bg-white dark:bg-gray-800 rounded-xl shadow-lg p-8 border border-gray-200 dark:border-gray-700",children:[e.jsx("h2",{id:"auth-form-title",className:"text-2xl font-bold text-gray-900 dark:text-white mb-6 text-center",children:"欢迎来到 Vote"}),e.jsxs("form",{onSubmit:h,className:"space-y-4","aria-labelledby":"auth-form-title",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"username",className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:"选择用户名"}),e.jsx("input",{type:"text",id:"username",value:r,onChange:i=>o(i.target.value),placeholder:"请输入用户名",className:`w-full px-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent dark:bg-gray-700 dark:text-white ${s?"border-red-500 dark:border-red-400":"border-gray-300 dark:border-gray-600"}`,autoFocus:!0,"aria-required":"true","aria-invalid":!!s,"aria-describedby":s?"username-error":void 0,"aria-label":"用户名输入"})]}),s&&e.jsx("div",{id:"username-error",className:"bg-red-50 dark:bg-red-900/20 text-red-600 dark:text-red-400 text-sm px-4 py-2 rounded-lg",role:"alert","aria-live":"polite",children:s}),e.jsx("button",{type:"submit",className:"w-full bg-gradient-to-r from-blue-600 to-blue-700 text-white font-medium py-3 px-6 rounded-lg hover:from-blue-700 hover:to-blue-800 transition-all duration-200 shadow-md hover:shadow-lg transform hover:-translate-y-1 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2","aria-label":"开始使用",children:"开始使用"})]}),e.jsxs("p",{className:"mt-6 text-center text-sm text-gray-500 dark:text-gray-400",children:["点击按钮即表示您同意我们的",e.jsx("a",{href:"#",className:"text-blue-600 dark:text-blue-400 hover:underline ml-1",children:"服务条款"}),"和",e.jsx("a",{href:"#",className:"text-blue-600 dark:text-blue-400 hover:underline ml-1",children:"隐私政策"})]})]})}const g=()=>{const[t,a]=l.useState(!1);return e.jsxs("nav",{className:"w-full",children:[e.jsx("div",{className:"md:hidden",children:e.jsx("button",{onClick:()=>a(!t),className:"flex items-center justify-center p-2 rounded-md text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/30 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2","aria-label":t?"关闭菜单":"打开菜单","aria-expanded":t,children:e.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t?e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"}):e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16m-7 6h7"})})})}),e.jsxs("ul",{className:"hidden md:flex items-center justify-between space-x-8 text-base font-medium",children:[e.jsxs("div",{className:"flex items-center space-x-8",children:[e.jsx("li",{children:e.jsx("a",{href:"/",className:"text-gray-700 dark:text-gray-200 hover:text-blue-600 dark:hover:text-blue-400 transition-colors duration-200 px-2 py-1 rounded-md hover:bg-blue-50 dark:hover:bg-blue-900/30","aria-label":"首页",children:"首页"})}),e.jsx("li",{children:e.jsx("a",{href:"/topics",className:"text-gray-700 dark:text-gray-200 hover:text-blue-600 dark:hover:text-blue-400 transition-colors duration-200 px-2 py-1 rounded-md hover:bg-blue-50 dark:hover:bg-blue-900/30","aria-label":"话题列表",children:"话题"})}),e.jsx("li",{children:e.jsx("a",{href:"/create-topic",className:"bg-gradient-to-r from-blue-600 to-blue-700 dark:from-blue-700 dark:to-blue-800 text-white px-5 py-2.5 rounded-lg hover:from-blue-700 hover:to-blue-800 dark:hover:from-blue-800 dark:hover:to-blue-900 transition-all duration-200 shadow-md hover:shadow-lg transform hover:-translate-y-0.5 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2","aria-label":"创建新话题",children:"创建话题"})})]}),e.jsxs("div",{className:"flex items-center space-x-6",children:[e.jsx("li",{children:e.jsx(u,{})}),e.jsx("li",{children:e.jsx(c,{})})]})]}),t&&e.jsx("div",{className:"md:hidden mt-4",children:e.jsxs("div",{className:"flex flex-col space-y-4 p-4 bg-white dark:bg-gray-800 rounded-lg shadow-lg border border-gray-200 dark:border-gray-700",children:[e.jsx("a",{href:"/",className:"block py-2 px-4 rounded-md text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/30 transition-colors duration-200","aria-label":"首页",onClick:()=>a(!1),children:"首页"}),e.jsx("a",{href:"/topics",className:"block py-2 px-4 rounded-md text-gray-700 dark:text-gray-300 hover:text-blue-600 dark:hover:text-blue-400 hover:bg-blue-50 dark:hover:bg-blue-900/30 transition-colors duration-200","aria-label":"话题列表",onClick:()=>a(!1),children:"话题"}),e.jsx("a",{href:"/create-topic",className:"block py-2 px-4 rounded-md bg-gradient-to-r from-blue-600 to-blue-700 dark:from-blue-700 dark:to-blue-800 text-white text-center hover:from-blue-700 hover:to-blue-800 dark:hover:from-blue-800 dark:hover:to-blue-900 transition-all duration-200 shadow-md","aria-label":"创建新话题",onClick:()=>a(!1),children:"创建话题"}),e.jsxs("div",{className:"flex items-center justify-between py-2 px-4 border-t border-gray-200 dark:border-gray-700 mt-2",children:[e.jsx(u,{}),e.jsx(c,{})]})]})})]})};export{g as default};
